import Foundation

class BaseballGame {
    // ì •ë‹µ ë§Œë“¤ê¸° (ëœë¤í•œ 3ìë¦¬ ìˆ«ì)
    func makeAnswer() -> [Int] {
        var answer: [Int] = []
        //ë°˜ë³µë¬¸while ì‚¬ìš©í•´ì„œ ë°°ì—´ í¬ê¸°ê°€ 3ì´ ë  ë•Œê¹Œì§€ ìˆ«ì ì¶”ê°€
        while answer.count < 3 {
            let randomNum = Int.random(in: 1...9)
            if !answer.contains(randomNum) { //ì¤‘ë³µ ë°©ì§€
                answer.append(randomNum)
            }
        }
        
        return answer
    }

    // ê²Œì„ ì‹œì‘
    func start() {
        let answer = makeAnswer() // ì •ë‹µ ë§Œë“¤ê¸°
        print("âš¾ ãƒŠãƒ³ãƒãƒ¼ã‚„ãã‚…ã†ã¯ã˜ã‚ã‚‹ã‚ˆ! 1~9 ì‚¬ì´ì˜ ì„œë¡œ ë‹¤ë¥¸ ìˆ«ì 3ê°œë¥¼ ë§ì¶°ë¼)")

        while true {
            print("ìˆ«ì 3ê°œë¥¼ ì…ë ¥í•˜ì‹œì˜¤: ", terminator: "")
            guard let input = readLine(), input.count == 3, let numbers = input.map({ Int(String($0)) }) as? [Int] else {
                print("Try Again! 3ã¤ã®æ•°å­—ã‚’æ­£ç¢ºã«å…¥åŠ›ã—ã¦ãã ã•ã„.")
                continue
            }

            if Set(numbers).count != 3 || numbers.contains(0) {
                print("Select 3 numbers randomly between 1 and 9.")
                continue
            }

            let (strike, ball) = checkResult(userInput: numbers, answer: answer)
            print("Result: \(strike) ã‚¹ãƒˆãƒ©ã‚¤ã‚¯!, \(ball) ãƒœãƒ¼ãƒ«")

            if strike == 3 {
                print("You did itğŸ˜!!")
                break
            }
        }
    }

    // ìˆ«ì ë¹„êµ (ã‚¹ãƒˆãƒ©ã‚¤ã‚¯ ë° ãƒœãƒ¼ãƒ« íŒì •)
    func checkResult(userInput: [Int], answer: [Int]) -> (Int, Int) {
        var strike = 0
        var ball = 0

        for i in 0..<3 {
            if userInput[i] == answer[i] {
                strike += 1 // ê°™ì€ ìë¦¬ -> ìŠ¤íŠ¸ë¼ì´í¬
            } else if answer.contains(userInput[i]) {
                ball += 1 // ë‹¤ë¥¸ ìë¦¬? -> ë³¼
            }
        }

        return (strike, ball)
    }
}

// ê²Œì„ ì‹¤í–‰
let game = BaseballGame()
game.start()
